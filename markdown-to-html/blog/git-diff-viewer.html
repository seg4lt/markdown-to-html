<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Git Diff Viewer</title>
    <link rel="stylesheet" href="/markdown-to-html/styles.css" />
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/github-dark.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Cascadia+Code:ital,wght@0,200..700;1,200..700&display=swap"
        rel="stylesheet" />
    <style>
        /* iosevka-latin-400-normal */
        @font-face {
            font-family: 'Iosevka';
            font-style: normal;
            font-display: swap;
            font-weight: 400;
            src: url(https://cdn.jsdelivr.net/fontsource/fonts/iosevka@latest/latin-400-normal.woff2) format('woff2'),
                url(https://cdn.jsdelivr.net/fontsource/fonts/iosevka@latest/latin-400-normal.woff) format('woff');
        }

        /* iosevka-latin-700-normal */
        @font-face {
            font-family: 'Iosevka';
            font-style: normal;
            font-display: swap;
            font-weight: 700;
            src: url(https://cdn.jsdelivr.net/fontsource/fonts/iosevka@latest/latin-700-normal.woff2) format('woff2'),
                url(https://cdn.jsdelivr.net/fontsource/fonts/iosevka@latest/latin-700-normal.woff) format('woff');
        }
    </style>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
</head>

<body>
    <div class="global-container">
        <header class="main-header">
            <h1 class="main-title">m2h</h1>
            <p class="main-subtitle">Markdown to HTML generator written in Zig</p>
            <nav class="main-nav">
    <ul class="nav-links">
        <li><a href="/markdown-to-html/" class="button-link" {{target}}>Home</a>
</li>

<li><a href="/markdown-to-html/blog" class="button-link" {{target}}>blog</a>
</li>

<li><a href="/markdown-to-html/series" class="button-link" {{target}}>series</a>
</li>

<li><a href="/markdown-to-html/about" class="button-link" {{target}}>about</a>
</li>

<li><a href="/markdown-to-html/project" class="button-link" {{target}}>project</a>
</li>

    </ul>
</nav>

        </header>
        <div class="main-content">
<h1>Git Diff Viewer</h1>


<p>Added support for <code class="inline-code">git-diff</code> and <code class="inline-code">diff</code> code blocks with proper syntax highlighting.</p>


<h2>Usage</h2>


<p>Use triple backticks with <code class="inline-code">git-diff</code> or <code class="inline-code">diff</code> as the language:</p>


<h2>Example - The Change That Added This Feature</h2>


<p>Here's the actual diff that added this feature to HtmlGenerator.zig:</p>


<pre class="code-block"><code class="language-diff">@@ -516,6 +516,13 @@
     }

-    fn generateCodeBlock(self: *@This(), code_block: Node.CodeBlock) ![]u8 {
-        const class_attr = if (code_block.language) |lang|
+    fn generateCodeBlock(self: *@This(), code_block: Node.CodeBlock) ![]u8 {
+        // Special handling for git-diff
+        if (code_block.language) |lang| {
+            if (mem.eql(u8, lang, &quot;git-diff&quot;) or mem.eql(u8, lang, &quot;diff&quot;)) {
+                return try self.generateDiffBlock(code_block.content);
+            }
+        }
+
+        const class_attr = if (code_block.language) |lang|
</code></pre> 


<p>And the new function that renders diff blocks:</p>


<pre class="code-block"><code class="language-diff">+    fn generateDiffBlock(self: *@This(), content: []const u8) ![]u8 {
+        var result: ArrayList(u8) = .empty;
+        try result.appendSlice(self.arena, &quot;&lt;pre class=\&quot;code-block diff-block\&quot;&gt;&lt;code&gt;&quot;);
+
+        var line_iter = mem.splitScalar(u8, content, &#39;\n&#39;);
+        while (line_iter.next()) |line| {
+            if (line.len &gt; 0 and line[0] == &#39;+&#39;) {
+                // Green for additions
+            } else if (line.len &gt; 0 and line[0] == &#39;-&#39;) {
+                // Red for removals
+            }
+        }
+        return result.items;
+    }
</code></pre> 


<h2>CSS Styles Added</h2>


<pre class="code-block"><code class="language-diff">+.diff-add {
+    display: block;
+    background-color: oklch(0.3 0.1 142);
+    color: oklch(0.85 0.15 142);
+}
+.diff-remove {
+    display: block;
+    background-color: oklch(0.3 0.1 25);
+    color: oklch(0.85 0.15 25);
+}
+.diff-hunk {
+    display: block;
+    color: var(--nav-primary-color);
+}
</code></pre> 

</div>
        <footer class="main-footer">
            <div class="container">
                <p>
                    &copy; <span id="this-year"></span> seg4lt. Markdown to
                    html generator written in Zig
                </p>
            </div>
        </footer>
        <script>
            document.addEventListener("DOMContentLoaded", (event) => {
                document.getElementById("this-year").textContent =
                    new Date().getFullYear();
                hljs.highlightAll();
            });
        </script>
    </div>
</body>

</html>